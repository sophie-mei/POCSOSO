<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"/>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"/>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/js/bootstrap-switch.js" data-turbolinks-track="true"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <!-- Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css"/>
    <!-- Custom popup styling -->
    <link rel="stylesheet" href="./styles/popup.css">
    <link rel="stylesheet" href="./styles/custom-dropdown.css">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/8.0.20/jsrsasign-all-min.js"></script>
</head>
<body>
    <button class="openBtn">Popup</button>

    <!-- Export Popup -->
    <div class="modal fade" id="exportModal" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exportModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header vt-bg-secondary">
                    <div class="row-cols-1 w-100">
                        <div class="row-cols-1 text-center">
                            <img id="exportModalVisionsLogo" style="width: 90px; height: 70px" src="" class="rounded text-center mx-auto d-block mt-3" alt="Visions logo"/>
                        </div>
                        <h3 class="text-center" id="exportPurposeDescription">[PURPOSE DESCRIPTION]</h3>
                    </div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!-- Services -->
                <div class="d-flex justify-content-center">
                    <img id="exportModalExportServiceLogo" style="width: 90px; height: 90px" src="" class="rounded mx-auto d-block" alt="[Logo Export]" />
                    <i class="fas fa-arrow-right rounded text-center mx-auto d-block align-self-center"></i>
                    <img id="exportModalImportServiceLogo" style="width: 90px; height: 90px" src="" class="rounded mx-auto d-block" alt="[Logo import]"/>
                </div>
                <div class="modal-body">
                    <table class="table table-striped">
                        <tbody id="exporttbody">
                            [DATATYPES & TOGGLES]
                        </tbody>
                    </table>
                </div>
                <div class="form-check form-check-inline mx-auto">
                    <input type="checkbox" class="form-check-input" name="isNewAccount" id="isNewAccount"> Je n'ai pas de compte chez <span id="noAccountServiceImport">[SERVICE IMPORT NAME]</span>
                </div>
                <div class="row-cols-1 text-center mt-4">
                    <div id="exportTos"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Fermer
                    </button>
                    <button type="button" id="btn-validate" class="text-white btn vt-button-primary">
                        Exporter mes donn√©es
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/consentPopups.js"></script>
    <script>
        // var datatypesIds = [];
        // var checkboxIds = [];
        // var services = [];
        // var purposeName = "";
        // let serviceExportname = "";
        // // $(window).on("load", loadPurposes);
  
        // $("#message").hide();
        // $("#messageEmail").hide();
        // $('#redirect').hide();
  
        $(document).ready(function () {
          $(document).on("click", ".openBtn", function (e) {
            e.preventDefault();
            loadPopup("export");
          });
  
          document
            .getElementById("btn-validate")
            .addEventListener("click", (e) => {
              $("#exportModal").modal("hide");
              startExportProcess();
            });
        });
    </script>
</body>
</html>